{% extends "_base.html" %}
{% load static %}

{% block head %}
  <script src="{% static 'js/confirm_input.js' %}" defer></script>
  <script src="{% static 'js/temp_pfp.js' %}" defer></script>
{% endblock head %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">Configuraci칩n de la cuenta</h1>
    <form id="mainForm" action="{% url 'appAjustes:configuracion_cuenta' %}" method="post" class="space-y-4">
        {% csrf_token %}
        
        <div class="flex items-center space-x-4">
            <img id="profileImage" src="{{ user.foto_perfil.url }}" alt="Perfil" class="w-16 h-16 rounded-full cursor-pointer">
            {{ form_datos }}
        </div>
        
        <button type="submit" class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">Guardar cambios</button>
        <input class="hidden" type="file" id="fileInput" name="foto_perfil" accept="image/*" onchange="document.getElementById('mainForm').submit();">
    </form>

    <div class="mt-4 space-y-2">
        <button id="logout-button" 
                type="button"
                class="confirmation-button bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600"
                data-action="logout"
                data-url="{% url 'appLoginRegistro:logout_confirmation' %}"
                data-confirm-button-id="confirm-logout"
                data-cancel-button-id="cancel-logout"
                data-redirect-url="{% url 'appLoginRegistro:logout' %}">
            Cerrar sesi칩n
        </button>

        <button id="delete-account-button" 
                type="button" 
                class="confirmation-button bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600"
                data-action="delete-account"
                data-url="{% url 'appLoginRegistro:delete_account_confirmation' %}"
                data-confirm-button-id="confirm-delete-account"
                data-cancel-button-id="cancel-delete-account"
                data-redirect-url="{% url 'appLoginRegistro:delete_account' %}">
            Eliminar cuenta
        </button>
    </div>

    <h1 class="text-2xl font-bold mt-8 mb-4">Tus datos</h1>
    <a href="{% url 'appAjustes:ver_datos' %}">Ver tus datos</a>

    
    <div class="flex justify-center items-center py-2">
        <div class="w-full max-w-md">
            <h1 class="text-2xl font-bold mt-8 mb-4 text-center">Cambiar contrase침a</h1>
            <form method="post" class="w-full bg-white p-8 rounded-lg shadow-md">
                {% csrf_token %}
                {{ form_cambio_pssw }}
                <button type="submit" class="w-full mt-4 bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600">Cambiar Contrase침a</button>
            </form>
            <hr class="mt-8">
        </div>
    </div>
    
    <hr class="mt-8">
</div>
{% endblock content %}
